import{a as r,S as c}from"./main-6c126296.js";import{A as m}from"./avatars-cf792582.js";const{VITE_BASEURL:o}={VITE_BASEURL:"https://triangle-golk-json-server.onrender.com",BASE_URL:"/Triangle_Golk/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g={async addComment(e){try{const t=await r.post(`${o}/comments`,e);return(await c.fire({scrollbarPadding:!1,icon:"success",text:"評價成功，我們將於 7-14 天內審核證明，若成功即可在課程頁面內查看自已的評價！",showConfirmButton:!1,timer:2e3})).isDismissed&&(location.href="user_courses.html"),t.data}catch(t){console.log(t),await c.fire({scrollbarPadding:!1,icon:"error",text:"新增評論失敗, 請聯繫客服處理"})}},async editorComment(e,t){try{const s=await r.patch(`${o}/comments/${e}`,t);return(await c.fire({scrollbarPadding:!1,icon:"success",text:"修改評價成功，我們將於 7-14 天內審核證明，若成功即可在課程頁面內查看自已的評價！",showConfirmButton:!1,timer:2e3})).isDismissed&&(location.href="user_courses.html"),s.data}catch(s){console.log(s);const a=await c.fire({scrollbarPadding:!1,icon:"error",text:"修改評論失敗, 請聯繫客服處理"});(a.isConfirmed||a.isDismissed)&&(location.href="user_courses.html")}},async getCurrent(e){try{return(await r.get(`${o}/comments/${e}?_expand=user&_expand=course`)).data}catch(t){console.log(t);const s=await c.fire({scrollbarPadding:!1,icon:"error",text:"查無此評論"});(s.isConfirmed||s.isDismissed)&&(location.href="user_courses.html")}},async getComments(e=1,t=6,s="timer",a="desc",i){try{const n=await r.get(`${o}/comments?courseId=${i}`),l=await r.get(`${o}/comments?courseId=${i}&_expand=user&_page=${e}&_limit=${t}&_sort=${s}&_order=${a}&isPassed=1`);return{totalPages:Math.ceil(n.data.length/6),currentPage:e,data:l.data}}catch(n){console.log(n),await c.fire({scrollbarPadding:!1,icon:"error",title:"獲取評論失敗"})}},async likeComment(e,t){try{const s=await r.patch(`${o}/comments/${e}`,t)}catch(s){console.log(s)}},async getBest(){try{const e=await r.get(`${o}/comments?score_gte=4&_expand=user&_expand=course&isPassed=1`),t=await m.getTotal();return e.data.map(s=>({...s,avatarUrl:t.find(a=>s.user.avatarId===a.id).image}))}catch(e){console.log(e)}}};export{g as C};
