import{a as r,S as c}from"./main-b28f6a90.js";import{A as m}from"./avatars-7fdc7783.js";const{VITE_BASEURL:o}={VITE_BASEURL:"https://triangle-golk-json-server.onrender.com",BASE_URL:"/Triangle_Golk/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g={async addComment(s){try{const t=await r.post(`${o}/comments`,s);return(await c.fire({scrollbarPadding:!1,icon:"success",text:"評價成功，我們將於 7-14 天內審核證明，若成功即可在課程頁面內查看自已的評價！",showConfirmButton:!1,timer:2e3})).isDismissed&&(location.href="user_courses.html"),t.data}catch(t){console.log(t),await c.fire({scrollbarPadding:!1,icon:"error",text:"新增評論失敗, 請聯繫客服處理"})}},async editorComment(s,t){try{const e=await r.patch(`${o}/comments/${s}`,t);return(await c.fire({scrollbarPadding:!1,icon:"success",text:"修改評價成功，我們將於 7-14 天內審核證明，若成功即可在課程頁面內查看自已的評價！",showConfirmButton:!1,timer:2e3})).isDismissed&&(location.href="user_courses.html"),e.data}catch(e){console.log(e);const a=await c.fire({scrollbarPadding:!1,icon:"error",text:"修改評論失敗, 請聯繫客服處理"});(a.isConfirmed||a.isDismissed)&&(location.href="user_courses.html")}},async getCurrent(s){try{return(await r.get(`${o}/comments/${s}?_expand=user&_expand=course`)).data}catch(t){console.log(t);const e=await c.fire({scrollbarPadding:!1,icon:"error",text:"查無此評論"});(e.isConfirmed||e.isDismissed)&&(location.href="user_courses.html")}},async getComments(s=1,t=6,e="timer",a="desc",i){try{const n=await r.get(`${o}/comments?courseId=${i}`),l=await r.get(`${o}/comments?courseId=${i}&_expand=user&_page=${s}&_limit=${t}&_sort=${e}&_order=${a}`);return{totalPages:Math.ceil(n.data.length/6),currentPage:s,data:l.data}}catch(n){console.log(n),await c.fire({scrollbarPadding:!1,icon:"error",title:"獲取評論失敗"})}},async likeComment(s,t){try{const e=await r.patch(`${o}/comments/${s}`,t)}catch(e){console.log(e)}},async getBest(){try{const s=await r.get(`${o}/comments?score_gte=4&_expand=user&_expand=course&isPassed=1`),t=await m.getTotal();return s.data.map(e=>({...e,avatarUrl:t.find(a=>e.user.avatarId===a.id).image}))}catch(s){console.log(s)}}};export{g as C};
