import{e as F,a as T,b as q,S as R}from"./swiper-core-19160206.js";import{c as G,N as j,A as N}from"./autoplay-054b67c1.js";import{l as H}from"./index-972ae5fb.js";import{a as U}from"./main-b28f6a90.js";import{C as _}from"./comment-24e62baa.js";import{C as V}from"./course-f55b6d4c.js";const{VITE_BASEURL:W}={VITE_BASEURL:"https://triangle-golk-json-server.onrender.com",BASE_URL:"/Triangle_Golk/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},K={async get(){try{return(await U.get(`${W}/keyWords`)).data}catch(r){console.log(r)}}};function w(r){return r===void 0&&(r=""),`.${r.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function X(r){let{swiper:e,extendParams:x,on:n,emit:y}=r;const d="swiper-pagination";x({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),e.pagination={el:null,bullets:[]};let u,b=0;const v=a=>(Array.isArray(a)?a:[a]).filter(s=>!!s);function A(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function I(a,s){const{bulletActiveClass:t}=e.params.pagination;a&&(a=a[`${s==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${t}-${s}`),a=a[`${s==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${t}-${s}-${s}`)))}function z(a){const s=a.target.closest(w(e.params.pagination.bulletClass));if(!s)return;a.preventDefault();const t=T(s)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===t)return;const i=e.realIndex,o=e.getSlideIndexByData(t),h=e.getSlideIndexByData(e.realIndex);if(o>e.slides.length-e.loopedSlides){const L=e.activeIndex;e.loopFix({direction:o>h?"next":"prev",activeSlideIndex:o,slideTo:!1});const l=e.activeIndex;L===l&&e.slideToLoop(i,0,!1,!0)}e.slideToLoop(t)}else e.slideTo(t)}function C(){const a=e.rtl,s=e.params.pagination;if(A())return;let t=e.pagination.el;t=v(t);let i,o;const h=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,L=e.params.loop?Math.ceil(h/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(o=e.previousRealIndex||0,i=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(i=e.snapIndex,o=e.previousSnapIndex):(o=e.previousIndex||0,i=e.activeIndex||0),s.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const l=e.pagination.bullets;let g,m,S;if(s.dynamicBullets&&(u=F(l[0],e.isHorizontal()?"width":"height",!0),t.forEach(c=>{c.style[e.isHorizontal()?"width":"height"]=`${u*(s.dynamicMainBullets+4)}px`}),s.dynamicMainBullets>1&&o!==void 0&&(b+=i-(o||0),b>s.dynamicMainBullets-1?b=s.dynamicMainBullets-1:b<0&&(b=0)),g=Math.max(i-b,0),m=g+(Math.min(l.length,s.dynamicMainBullets)-1),S=(m+g)/2),l.forEach(c=>{const p=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(f=>`${s.bulletActiveClass}${f}`)].map(f=>typeof f=="string"&&f.includes(" ")?f.split(" "):f).flat();c.classList.remove(...p)}),t.length>1)l.forEach(c=>{const p=T(c);p===i?c.classList.add(...s.bulletActiveClass.split(" ")):e.isElement&&c.setAttribute("part","bullet"),s.dynamicBullets&&(p>=g&&p<=m&&c.classList.add(...`${s.bulletActiveClass}-main`.split(" ")),p===g&&I(c,"prev"),p===m&&I(c,"next"))});else{const c=l[i];if(c&&c.classList.add(...s.bulletActiveClass.split(" ")),e.isElement&&l.forEach((p,f)=>{p.setAttribute("part",f===i?"bullet-active":"bullet")}),s.dynamicBullets){const p=l[g],f=l[m];for(let $=g;$<=m;$+=1)l[$]&&l[$].classList.add(...`${s.bulletActiveClass}-main`.split(" "));I(p,"prev"),I(f,"next")}}if(s.dynamicBullets){const c=Math.min(l.length,s.dynamicMainBullets+4),p=(u*c-u)/2-S*u,f=a?"right":"left";l.forEach($=>{$.style[e.isHorizontal()?f:"top"]=`${p}px`})}}t.forEach((l,g)=>{if(s.type==="fraction"&&(l.querySelectorAll(w(s.currentClass)).forEach(m=>{m.textContent=s.formatFractionCurrent(i+1)}),l.querySelectorAll(w(s.totalClass)).forEach(m=>{m.textContent=s.formatFractionTotal(L)})),s.type==="progressbar"){let m;s.progressbarOpposite?m=e.isHorizontal()?"vertical":"horizontal":m=e.isHorizontal()?"horizontal":"vertical";const S=(i+1)/L;let c=1,p=1;m==="horizontal"?c=S:p=S,l.querySelectorAll(w(s.progressbarFillClass)).forEach(f=>{f.style.transform=`translate3d(0,0,0) scaleX(${c}) scaleY(${p})`,f.style.transitionDuration=`${e.params.speed}ms`})}s.type==="custom"&&s.renderCustom?(l.innerHTML=s.renderCustom(e,i+1,L),g===0&&y("paginationRender",l)):(g===0&&y("paginationRender",l),y("paginationUpdate",l)),e.params.watchOverflow&&e.enabled&&l.classList[e.isLocked?"add":"remove"](s.lockClass)})}function B(){const a=e.params.pagination;if(A())return;const s=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let t=e.pagination.el;t=v(t);let i="";if(a.type==="bullets"){let o=e.params.loop?Math.ceil(s/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&o>s&&(o=s);for(let h=0;h<o;h+=1)a.renderBullet?i+=a.renderBullet.call(e,h,a.bulletClass):i+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?i=a.renderFraction.call(e,a.currentClass,a.totalClass):i=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?i=a.renderProgressbar.call(e,a.progressbarFillClass):i=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],t.forEach(o=>{a.type!=="custom"&&(o.innerHTML=i||""),a.type==="bullets"&&e.pagination.bullets.push(...o.querySelectorAll(w(a.bulletClass)))}),a.type!=="custom"&&y("paginationRender",t[0])}function M(){e.params.pagination=G(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let s;typeof a.el=="string"&&e.isElement&&(s=e.el.querySelector(a.el)),!s&&typeof a.el=="string"&&(s=[...document.querySelectorAll(a.el)]),s||(s=a.el),!(!s||s.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(s)&&s.length>1&&(s=[...e.el.querySelectorAll(a.el)],s.length>1&&(s=s.filter(t=>q(t,".swiper")[0]===e.el)[0])),Array.isArray(s)&&s.length===1&&(s=s[0]),Object.assign(e.pagination,{el:s}),s=v(s),s.forEach(t=>{a.type==="bullets"&&a.clickable&&t.classList.add(...(a.clickableClass||"").split(" ")),t.classList.add(a.modifierClass+a.type),t.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(t.classList.add(`${a.modifierClass}${a.type}-dynamic`),b=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&t.classList.add(a.progressbarOppositeClass),a.clickable&&t.addEventListener("click",z),e.enabled||t.classList.add(a.lockClass)}))}function E(){const a=e.params.pagination;if(A())return;let s=e.pagination.el;s&&(s=v(s),s.forEach(t=>{t.classList.remove(a.hiddenClass),t.classList.remove(a.modifierClass+a.type),t.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(t.classList.remove(...(a.clickableClass||"").split(" ")),t.removeEventListener("click",z))})),e.pagination.bullets&&e.pagination.bullets.forEach(t=>t.classList.remove(...a.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:s}=e.pagination;s=v(s),s.forEach(t=>{t.classList.remove(a.horizontalClass,a.verticalClass),t.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?D():(M(),B(),C())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&C()}),n("snapIndexChange",()=>{C()}),n("snapGridLengthChange",()=>{B(),C()}),n("destroy",()=>{E()}),n("enable disable",()=>{let{el:a}=e.pagination;a&&(a=v(a),a.forEach(s=>s.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{C()}),n("click",(a,s)=>{const t=s.target,i=v(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&i&&i.length>0&&!t.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&t===e.navigation.nextEl||e.navigation.prevEl&&t===e.navigation.prevEl))return;const o=i[0].classList.contains(e.params.pagination.hiddenClass);y(o===!0?"paginationShow":"paginationHide"),i.forEach(h=>h.classList.toggle(e.params.pagination.hiddenClass))}});const P=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=v(a),a.forEach(s=>s.classList.remove(e.params.pagination.paginationDisabledClass))),M(),B(),C()},D=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=v(a),a.forEach(s=>s.classList.add(e.params.pagination.paginationDisabledClass))),E()};Object.assign(e.pagination,{enable:P,disable:D,render:B,update:C,init:M,destroy:E})}const O=document.querySelector(".index-tag-list"),k=document.querySelector(".swiper-wrapper"),Y=document.querySelector(".new-courses");async function J(){H();const r=await K.get(),e=await _.getBest(),x=await V.getNewThree();H(e),Q(r),Z(e),ee(x)}J();function Q(r){O.innerHTML=r.map(e=>` <li class="index-tag text-nowrap cur-point">${e.keyWord}</li>`).join("")}function Z(r){const e=["blue","primary","orange"];if(!r.length){k.classList.add("d-none"),k.previousElementSibling.classList.remove("d-none");return}k.innerHTML=r.map((n,y)=>{const{nickName:d,email:u}=n.user;return`<li data-id="${n.courseId}" class="swiper-slide p-5 bg-${e[(y+1)%3]} rounded-4 d-flex flex-column cur-point card-hover">
    <h4 class="fs-5 mb-4">${n.course.title}</h4>
    <div class="fs-4 mb-4 flex-grow-1">
      ${n.content}
    </div>
    <div class="d-flex align-items-center gap-3">
      <img src="${n.avatarUrl}" alt="" class="recommend-avatar">
      <p class="fs-6 mb-0">${n.showName?d:`${u.split("@")[0][0]}***${u.split("@")[0][u.split("@")[0].length-1]}`}</p>
    </div>
  </li>`}).join(""),k.querySelectorAll(".swiper-slide").forEach(n=>{n.addEventListener("click",()=>{location.href=`coursepages.html?id=${n.dataset.id}&sort=timer`})})}function ee(r){Y.innerHTML=r.map(e=>`<li  class="d-flex flex-column">
  <a class="card border-0 latest-courses-hover h-100 rounded-4" href="./coursepages.html?id=${e.id}&sort=timer">
    <div class="pic">
      <img
        src="${e.cover}"
        alt="cover of the course"
        class="card-pic"
      />
    </div>
    <div
      class="badge d-flex justify-content-between align-items-center position-absolute"
    >
      <span
        class="brand bg-secondary small text-white rounded-1 py-1 px-3"
        >${e.platform}</span
      >
    </div>
    <div class="card-body">
      <h3 class="title text-secondary fs-6 fw-bold">
      ${e.title}
      </h3>
    </div>
    <div class="card-footer">
      <div class="tags mb-2 mt-auto">
      ${e.tags.map((x,n)=>`<span class="fs-8 ${n===e.tags.length-1?"":"me-2"}">#${x}</span>`).join("")}
      </div>
      <div class="stars d-flex">
        <div class="stars-icon text-primary me-2">
          <span class="material-symbols-outlined ${e.avgScore>=1?"":"outline-icon"}">star</span>
          <span class="material-symbols-outlined ${e.avgScore>=1?"":"outline-icon"}">star</span>
          <span class="material-symbols-outlined ${e.avgScore>=1?"":"outline-icon"}">star</span>
          <span class="material-symbols-outlined ${e.avgScore>=1?"":"outline-icon"}">star</span>
          <span class="material-symbols-outlined ${e.avgScore>=1?"":"outline-icon"}"
            >star</span
          >
        </div>
        <span class="fs-8 text-gray-400">(${e.comments.length})</span>
      </div>
    </div>
  </a>
</li>`).join("")}O.addEventListener("click",r=>{r.target.nodeName==="LI"&&(location.href=`course.html?q=${r.target.textContent}`)});new R(".other-courses",{slidesPerView:"auto",spaceBetween:16,centeredSlides:!1,loop:!0,modules:[j,N,X],autoplay:{delay:3e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-next",prevEl:".swiper-pre"},pagination:{el:".swiper-pagination",clickable:!0}});
